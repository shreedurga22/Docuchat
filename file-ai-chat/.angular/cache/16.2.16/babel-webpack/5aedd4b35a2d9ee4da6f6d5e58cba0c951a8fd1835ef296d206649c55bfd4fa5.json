{"ast":null,"code":"import { __decorate } from \"tslib\";\n// file-reader.component.ts\nimport { Component } from '@angular/core';\nexport let FileReaderComponent = class FileReaderComponent {\n  constructor(http) {\n    this.http = http;\n    this.selectedFile = null;\n    this.uploadedText = '';\n    this.response = '';\n    this.question = '';\n    this.showModal = false;\n    this.apiUrl = 'http://localhost:5000';\n  }\n  // Handle file selection\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      this.selectedFile = file;\n      this.uploadedText = '';\n      this.response = '';\n      this.question = '';\n      this.showModal = false;\n    }\n  }\n  // Upload the selected file\n  onUpload() {\n    if (!this.selectedFile) return;\n    const formData = new FormData();\n    formData.append('file', this.selectedFile);\n    this.http.post(`${this.apiUrl}/upload`, formData).subscribe({\n      next: res => {\n        this.uploadedText = res.file_text || '';\n        this.showModal = true; // Show modal alert\n      },\n\n      error: err => {\n        console.error('Upload error:', err);\n        alert('Failed to upload file.');\n      }\n    });\n  }\n  // Ask a question about the uploaded file\n  onAsk() {\n    if (!this.question || !this.uploadedText) {\n      alert('Please enter a question and upload a file first.');\n      return;\n    }\n    this.http.post(`${this.apiUrl}/ask`, {\n      question: this.question,\n      file_text: this.uploadedText\n    }).subscribe({\n      next: res => {\n        this.response = res.answer || 'No answer returned.';\n      },\n      error: err => {\n        console.error('Backend error:', err);\n        this.response = 'Could not get answer from backend.';\n      }\n    });\n  }\n  // Close modal\n  onModalOk() {\n    this.showModal = false;\n  }\n};\nFileReaderComponent = __decorate([Component({\n  selector: 'app-file-reader',\n  templateUrl: './file-reader.component.html',\n  styleUrls: ['./file-reader.component.css']\n})], FileReaderComponent);","map":{"version":3,"names":["Component","FileReaderComponent","constructor","http","selectedFile","uploadedText","response","question","showModal","apiUrl","onFileSelected","event","file","target","files","onUpload","formData","FormData","append","post","subscribe","next","res","file_text","error","err","console","alert","onAsk","answer","onModalOk","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\L&T projects\\file-ai-chat\\src\\app\\file-reader\\file-reader.component.ts"],"sourcesContent":["// file-reader.component.ts\nimport { Component } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-file-reader',\n  templateUrl: './file-reader.component.html',\n  styleUrls: ['./file-reader.component.css']\n})\nexport class FileReaderComponent {\n  selectedFile: File | null = null;\n  uploadedText: string = '';\n  response: string = '';\n  question: string = '';\n  showModal: boolean = false;\n\n  private apiUrl = 'http://localhost:5000';\n\n  constructor(private http: HttpClient) {}\n\n  // Handle file selection\n  onFileSelected(event: any) {\n    const file = event.target.files[0];\n    if (file) {\n      this.selectedFile = file;\n      this.uploadedText = '';\n      this.response = '';\n      this.question = '';\n      this.showModal = false;\n    }\n  }\n\n  // Upload the selected file\n  onUpload() {\n    if (!this.selectedFile) return;\n\n    const formData = new FormData();\n    formData.append('file', this.selectedFile);\n\n    this.http.post<{ file_text?: string }>(`${this.apiUrl}/upload`, formData).subscribe({\n      next: (res: { file_text?: string }) => {\n        this.uploadedText = res.file_text || '';\n        this.showModal = true; // Show modal alert\n      },\n      error: (err: any) => {\n        console.error('Upload error:', err);\n        alert('Failed to upload file.');\n      }\n    });\n  }\n\n  // Ask a question about the uploaded file\n  onAsk() {\n    if (!this.question || !this.uploadedText) {\n      alert('Please enter a question and upload a file first.');\n      return;\n    }\n\n    this.http.post<{ answer?: string }>(`${this.apiUrl}/ask`, {\n      question: this.question,\n      file_text: this.uploadedText\n    }).subscribe({\n      next: (res: { answer?: string }) => {\n        this.response = res.answer || 'No answer returned.';\n      },\n      error: (err: any) => {\n        console.error('Backend error:', err);\n        this.response = 'Could not get answer from backend.';\n      }\n    });\n  }\n\n  // Close modal\n  onModalOk() {\n    this.showModal = false;\n  }\n}\n"],"mappings":";AAAA;AACA,SAASA,SAAS,QAAQ,eAAe;AAQlC,WAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAS9BC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IARxB,KAAAC,YAAY,GAAgB,IAAI;IAChC,KAAAC,YAAY,GAAW,EAAE;IACzB,KAAAC,QAAQ,GAAW,EAAE;IACrB,KAAAC,QAAQ,GAAW,EAAE;IACrB,KAAAC,SAAS,GAAY,KAAK;IAElB,KAAAC,MAAM,GAAG,uBAAuB;EAED;EAEvC;EACAC,cAAcA,CAACC,KAAU;IACvB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIF,IAAI,EAAE;MACR,IAAI,CAACR,YAAY,GAAGQ,IAAI;MACxB,IAAI,CAACP,YAAY,GAAG,EAAE;MACtB,IAAI,CAACC,QAAQ,GAAG,EAAE;MAClB,IAAI,CAACC,QAAQ,GAAG,EAAE;MAClB,IAAI,CAACC,SAAS,GAAG,KAAK;;EAE1B;EAEA;EACAO,QAAQA,CAAA;IACN,IAAI,CAAC,IAAI,CAACX,YAAY,EAAE;IAExB,MAAMY,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACd,YAAY,CAAC;IAE1C,IAAI,CAACD,IAAI,CAACgB,IAAI,CAAyB,GAAG,IAAI,CAACV,MAAM,SAAS,EAAEO,QAAQ,CAAC,CAACI,SAAS,CAAC;MAClFC,IAAI,EAAGC,GAA2B,IAAI;QACpC,IAAI,CAACjB,YAAY,GAAGiB,GAAG,CAACC,SAAS,IAAI,EAAE;QACvC,IAAI,CAACf,SAAS,GAAG,IAAI,CAAC,CAAC;MACzB,CAAC;;MACDgB,KAAK,EAAGC,GAAQ,IAAI;QAClBC,OAAO,CAACF,KAAK,CAAC,eAAe,EAAEC,GAAG,CAAC;QACnCE,KAAK,CAAC,wBAAwB,CAAC;MACjC;KACD,CAAC;EACJ;EAEA;EACAC,KAAKA,CAAA;IACH,IAAI,CAAC,IAAI,CAACrB,QAAQ,IAAI,CAAC,IAAI,CAACF,YAAY,EAAE;MACxCsB,KAAK,CAAC,kDAAkD,CAAC;MACzD;;IAGF,IAAI,CAACxB,IAAI,CAACgB,IAAI,CAAsB,GAAG,IAAI,CAACV,MAAM,MAAM,EAAE;MACxDF,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBgB,SAAS,EAAE,IAAI,CAAClB;KACjB,CAAC,CAACe,SAAS,CAAC;MACXC,IAAI,EAAGC,GAAwB,IAAI;QACjC,IAAI,CAAChB,QAAQ,GAAGgB,GAAG,CAACO,MAAM,IAAI,qBAAqB;MACrD,CAAC;MACDL,KAAK,EAAGC,GAAQ,IAAI;QAClBC,OAAO,CAACF,KAAK,CAAC,gBAAgB,EAAEC,GAAG,CAAC;QACpC,IAAI,CAACnB,QAAQ,GAAG,oCAAoC;MACtD;KACD,CAAC;EACJ;EAEA;EACAwB,SAASA,CAAA;IACP,IAAI,CAACtB,SAAS,GAAG,KAAK;EACxB;CACD;AAnEYP,mBAAmB,GAAA8B,UAAA,EAL/B/B,SAAS,CAAC;EACTgC,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,C,EACWjC,mBAAmB,CAmE/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}